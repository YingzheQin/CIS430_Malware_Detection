from pathlib import Path
import random
import shutil

# Set the random seed
random.seed(42)

# Define source and target folders
source_folder = Path('images')
target_folder = Path('4_percent')

# Ensure the target folder exists
target_folder.mkdir(parents=True, exist_ok=True)

# Process each category
for category in range(10):
    category_folder = source_folder / str(category)
    target_category_folder = target_folder / str(category)

    # Ensure the target category folder exists
    target_category_folder.mkdir(parents=True, exist_ok=True)

    # Get all jpg files
    all_images = list(category_folder.glob('*.jpg'))

    # Randomly select 200 images
    selected_images = random.sample(all_images, 200)

    # Copy images to the target folder
    for image_path in selected_images:
        shutil.copy2(image_path, target_category_folder / image_path.name)
